require 'rake/clean'

CONTENT_ASSETS = 'TopDownShooterSpike\Content'
CONTENT_BIN = 'TopDownShooterSpike\bin\WindowsGL\Debug\Content'
CONTENT_COMPILER_EXE = '"./lib/Content Compiler/bin/XNAContentCompiler.exe"'

CLOBBER.include('**/bin/*')
CLEAN.include("#{CONTENT_BIN}")

desc 'builds the solution and compiles content'
task :default => ['compile:solution', 'compile:content']

desc 'Watches for content file changes'
task :watch => ['compile:watch']

desc 'builds the solution'
task :build => ['compile:solution']

namespace :compile do

  desc 'compiles content assets'
  task :content => ['clean'] do
    sh %{#{CONTENT_COMPILER_EXE} build #{CONTENT_ASSETS} #{CONTENT_BIN}}
  end

  task :watch do
    sh %{#{CONTENT_COMPILER_EXE} watch #{CONTENT_ASSETS} #{CONTENT_BIN}}
  end

  task :solution do
  end

end
